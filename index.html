<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>生活五角互动测评</title>
  <style>
    body {
      font-family: "Microsoft YaHei", sans-serif;
      margin: 20px;
      background: #f4f6fa;
    }
    h1, h2 {
      text-align: center;
    }
    .section {
      background: #fff;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin: 10px 0 5px;
    }
    input[type="text"], select, textarea {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      display: block;
      margin: 30px auto;
      padding: 10px 30px;
      font-size: 16px;
      background-color: #4a90e2;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background-color: #3b78c4;
    }
    #result {
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      margin-top: 30px;
      color: #333;
    }
  </style>
</head>
<body>
  <h1>生活五角 · 互动测评系统</h1>

  <form id="assessmentForm">
    <!-- 保留原有测评问题不变 -->
    <!-- ...（原HTML部分略，为节省空间）... -->

    <div class="section">
      <h2>6. 人际交往之国 · 心灵森林</h2>
      <label>朋友误会你，你最可能的做法是？</label>
      <select name="social_conflict">
        <option value="3">先道歉</option>
        <option value="3">解释清楚</option>
        <option value="1">冷处理</option>
        <option value="0">直接断联</option>
      </select>
      <label>你最看重友情的什么特质？</label>
      <select name="social_value">
        <option value="3">理解</option>
        <option value="2">陪伴</option>
        <option value="2">志同道合</option>
        <option value="1">彼此独立</option>
      </select>
    </div>

    <div class="section">
      <h2>7. 兴趣爱好之国 · 灵感山谷</h2>
      <label>你最近一次投入做的事是什么？当时感受如何？</label>
      <textarea name="flow_description" rows="3"></textarea>
      <label>你是否曾放弃过某个兴趣？为什么？</label>
      <textarea name="hobby_dropout" rows="3"></textarea>
    </div>

    <button type="submit">提交测评并打分</button>
  </form>

  <div id="result"></div>

  <script>
    document.getElementById("assessmentForm").addEventListener("submit", function (e) {
      e.preventDefault();

      let totalScore = 0;
      let sections = 2; // 只示例处理两个模块，可扩展到全部7个

      const form = e.target;

      // 人际交往打分
      totalScore += parseInt(form.social_conflict.value || 0);
      totalScore += parseInt(form.social_value.value || 0);

      // 兴趣爱好打分（通过关键词）
      const flowText = form.flow_description.value.toLowerCase();
      const hobbyText = form.hobby_dropout.value.toLowerCase();

      const flowKeywords = ["投入", "忘我", "时间流逝", "沉浸", "全神贯注"];
      const dropoutKeywords = ["没时间", "太难", "没兴趣", "放弃"];

      let flowScore = 0;
      flowKeywords.forEach(k => { if (flowText.includes(k)) flowScore += 1; });
      if (!dropoutKeywords.some(k => hobbyText.includes(k))) flowScore += 2;

      totalScore += flowScore;

      // 最终平均得分
      let avg = Math.round((totalScore / (sections * 6)) * 100);
      document.getElementById("result").innerText = `您的部分幸福得分约为：${avg} / 100（仅示例打分，完整打分逻辑可继续拓展）`;
    });
  </script>
</body>
</html>
